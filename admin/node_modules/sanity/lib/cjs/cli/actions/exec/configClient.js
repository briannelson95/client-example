"use strict";

var _configstore = _interopRequireDefault(require("configstore"));

var _cli = require("../../../_exports/cli");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// eslint-disable-next-line no-process-env
const sanityEnv = (process.env.SANITY_INTERNAL_ENV || '').toLowerCase();
const defaults = {};
const config = new _configstore.default(sanityEnv && sanityEnv !== 'production' ? "sanity-".concat(sanityEnv) : 'sanity', defaults, {
  globalConfigPath: true
});
const token = config.get('authToken');

if (!token) {
  throw new Error('--with-user-token specified, but no auth token could be found. Run `sanity login`');
} // eslint-disable-next-line camelcase


_cli.getCliClient.__internal__getToken = () => token;