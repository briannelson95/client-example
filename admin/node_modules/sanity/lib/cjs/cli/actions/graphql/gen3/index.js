"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _helpers = require("../helpers");

var _generateTypeFilters = require("./generateTypeFilters");

var _generateTypeSortings = require("./generateTypeSortings");

var _generateTypeQueries = require("./generateTypeQueries");

var _default = extracted => {
  const documentInterface = extracted.interfaces.find(iface => iface.name === 'Document');

  if (!documentInterface || (0, _helpers.isUnion)(documentInterface)) {
    throw new Error('Failed to find document interface');
  }

  const types = [...extracted.types, documentInterface];
  const filters = (0, _generateTypeFilters.generateTypeFilters)(types);
  const sortings = (0, _generateTypeSortings.generateTypeSortings)(types);
  const queries = (0, _generateTypeQueries.generateTypeQueries)(types, sortings.filter(node => node.kind === 'InputObject'));
  const graphqlTypes = [...extracted.types, ...filters, ...sortings];
  return {
    types: graphqlTypes,
    queries,
    interfaces: extracted.interfaces,
    generation: 'gen3'
  };
};

exports.default = _default;