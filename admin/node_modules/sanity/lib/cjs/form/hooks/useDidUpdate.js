"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useDidUpdate = useDidUpdate;

var _react = require("react");

var _shallowEquals = _interopRequireDefault(require("shallow-equals"));

var _usePrevious = require("./usePrevious");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function useDidUpdate(current, didUpdate) {
  let compare = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _shallowEquals.default;
  const previous = (0, _usePrevious.usePrevious)(current);
  const initial = (0, _react.useRef)(true);
  (0, _react.useEffect)(() => {
    if (initial.current) {
      initial.current = false;
      return;
    }

    if (!compare(previous, current)) {
      didUpdate(previous, current);
    }
  }, [didUpdate, current, previous, compare]);
}