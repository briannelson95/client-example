"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createSetCallback = createSetCallback;

var _blockTools = require("@sanity/block-tools");

var _patch = require("../../../patch");

function createSetCallback(options) {
  const {
    allowedDecorators,
    block,
    onChange
  } = options;
  return givenBlock => {
    const patches = [(0, _patch.set)((0, _blockTools.normalizeBlock)(givenBlock, {
      allowedDecorators
    }), [{
      _key: block._key
    }])];
    return onChange(patches);
  };
}