"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.applyAll = applyAll;
exports.applyPatch = applyPatch;

var _isString2 = _interopRequireDefault(require("lodash/isString"));

var _isObject2 = _interopRequireDefault(require("lodash/isObject"));

var _array = require("./array");

var _object = require("./object");

var _primitive = require("./primitive");

var _string = require("./string");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function applyAll(value, patches) {
  return patches.reduce(applyPatch, value);
}

function _applyPatch(value, patch) {
  if (Array.isArray(value)) {
    return (0, _array._arrayApply)(value, patch);
  }

  if ((0, _isString2.default)(value)) {
    return (0, _string._stringApply)(value, patch);
  }

  if ((0, _isObject2.default)(value)) {
    return (0, _object._objectApply)(value, patch);
  }

  return (0, _primitive._primitiveApply)(value, patch);
}

function applyPatch(value, patch) {
  const res = _applyPatch(value, patch); // console.log('applyPatch(%o, %o) : %o (noop? %o)', value, patch, res, value === res)


  return res;
}