"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.decodePath = decodePath;
exports.encodePath = encodePath;

var _mutator = require("@sanity/mutator");

const IS_NUMERIC = /^\d+$/;

function unquote(str) {
  return str.replace(/^['"]/, '').replace(/['"]$/, '');
}

function splitAttr(segment) {
  const [attr, key] = segment.split('==');
  return {
    [attr]: unquote(key)
  };
}

function coerce(segment) {
  return IS_NUMERIC.test(segment) ? Number(segment) : segment;
}

function parseGradientPath(focusPathStr) {
  return focusPathStr.split(/[[.\]]/g).filter(Boolean).map(seg => seg.includes('==') ? splitAttr(seg) : coerce(seg));
}
/**
 * @internal
 */


function encodePath(formBuilderPath) {
  return (0, _mutator.arrayToJSONMatchPath)(formBuilderPath);
}
/**
 * @internal
 */


function decodePath(gradientPath) {
  return parseGradientPath(gradientPath);
}