"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setAtPath = setAtPath;

var _types = require("@sanity/types");

function setAtPath(currentTree, path, value) {
  var _currentTree$children;

  if (path.length === 0) {
    return { ...(currentTree || {}),
      value
    };
  }

  const [head, ...tail] = path;
  const key = (0, _types.isKeySegment)(head) ? head._key : String(head);
  const children = (_currentTree$children = currentTree === null || currentTree === void 0 ? void 0 : currentTree.children) !== null && _currentTree$children !== void 0 ? _currentTree$children : {};
  return {
    value: currentTree === null || currentTree === void 0 ? void 0 : currentTree.value,
    children: { ...children,
      [key]: setAtPath(children[key] || {}, tail, value)
    }
  };
}