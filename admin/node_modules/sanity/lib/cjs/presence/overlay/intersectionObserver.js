"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createIntersectionObserver = void 0;

var _rxjs = require("rxjs");

var _operators = require("rxjs/operators");

const createIntersectionObserver = options => {
  const entries$ = new _rxjs.Subject();
  const intersectionObserver = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      entries$.next(entry);
    });
  }, options);
  return {
    observe: element => {
      return new _rxjs.Observable(subscriber => {
        const subscription = entries$.pipe((0, _operators.filter)(entry => entry.target === element)).subscribe(subscriber);
        intersectionObserver.observe(element);
        return () => {
          subscription.unsubscribe();
          intersectionObserver.unobserve(element);
        };
      });
    }
  };
};

exports.createIntersectionObserver = createIntersectionObserver;