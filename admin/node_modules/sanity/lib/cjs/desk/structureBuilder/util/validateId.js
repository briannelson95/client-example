"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.validateId = validateId;

var _SerializeError = require("../SerializeError");

const disallowedPattern = /([^A-Za-z0-9-_.])/;

function validateId(id, parentPath, pathSegment) {
  if (typeof id !== 'string') {
    throw new _SerializeError.SerializeError("Structure node id must be of type string, got ".concat(typeof id), parentPath, pathSegment);
  }

  const [disallowedChar] = id.match(disallowedPattern) || [];

  if (disallowedChar) {
    throw new _SerializeError.SerializeError("Structure node id cannot contain character \"".concat(disallowedChar, "\""), parentPath, pathSegment);
  }

  if (id.startsWith('__edit__')) {
    throw new _SerializeError.SerializeError("Structure node id cannot start with __edit__", parentPath, pathSegment);
  }

  return id;
}