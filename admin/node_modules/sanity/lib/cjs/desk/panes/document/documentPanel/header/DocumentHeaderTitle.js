"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.DocumentHeaderTitle = DocumentHeaderTitle;

var _react = _interopRequireDefault(require("react"));

var _useDocumentPane = require("../../useDocumentPane");

var _preview = require("../../../../../preview");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function DocumentHeaderTitle() {
  const {
    connectionState,
    schemaType,
    title,
    value: documentValue
  } = (0, _useDocumentPane.useDocumentPane)();
  const subscribed = Boolean(documentValue) && connectionState === 'connected';
  const {
    error,
    value
  } = (0, _preview.unstable_useDocumentPreview)({
    enabled: subscribed,
    schemaType,
    value: documentValue
  });

  if (connectionState !== 'connected') {
    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null);
  }

  if (!documentValue) {
    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, "New ", (schemaType === null || schemaType === void 0 ? void 0 : schemaType.title) || (schemaType === null || schemaType === void 0 ? void 0 : schemaType.name));
  }

  if (subscribed) {
    if (error) {
      return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, "Error: ", error.message);
    }

    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, (value === null || value === void 0 ? void 0 : value.title) || /*#__PURE__*/_react.default.createElement("span", {
      style: {
        color: 'var(--card-muted-fg-color)'
      }
    }, "Untitled"));
  }

  return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, title);
}