"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resolveBackend = resolveBackend;

var _localStorage = require("./localStorage");

var _memory = require("./memory");

let isSupported = null;

function supportsLocalStorage() {
  if (isSupported !== null) {
    return isSupported;
  }

  const testKey = '__test__';

  try {
    localStorage.setItem(testKey, testKey);
    localStorage.removeItem(testKey);
    isSupported = true;
  } catch (evt) {
    isSupported = false;
  }

  return isSupported;
}

function resolveBackend() {
  return supportsLocalStorage() ? _localStorage.localStorageBackend : _memory.memoryBackend;
}