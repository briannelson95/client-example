"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.replay = replay;

var _Timeline = require("./Timeline");

function replay(events) {
  const fst = events[0];
  if ((fst === null || fst === void 0 ? void 0 : fst.type) !== 'initial') throw new Error('no initial event');
  const timeline = new _Timeline.Timeline({
    publishedId: fst.publishedId
  });
  /* eslint-disable no-console */

  console.log('Replaying');
  console.log({
    events
  });
  /* eslint-enable no-console */

  for (let i = 1; i < events.length; i++) {
    const event = events[i];

    switch (event.type) {
      case 'initial':
        throw new Error('unexpected initial event');

      case 'addRemoteMutation':
        timeline.addRemoteMutation(event.event);
        break;

      case 'addTranslogEntry':
        timeline.addTranslogEntry(event.event);
        break;

      case 'didReachEarliestEntry':
        timeline.didReachEarliestEntry();
        break;

      case 'updateChunks':
        timeline.updateChunks();
        break;

      default:
    }
  }

  return timeline;
}