"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.remoteSnapshots = void 0;

var _rxjs = require("rxjs");

var _operators = require("rxjs/operators");

var _createMemoizer = require("../utils/createMemoizer");

var _memoizedPair = require("./memoizedPair");

const remoteSnapshots = (0, _createMemoizer.memoize)((client, idPair, typeName) => {
  return (0, _memoizedPair.memoizedPair)(client, idPair, typeName).pipe((0, _operators.switchMap)(_ref => {
    let {
      published,
      draft
    } = _ref;
    return (0, _rxjs.merge)(published.remoteSnapshot$, draft.remoteSnapshot$);
  }));
}, (_client, idPair, typeName) => idPair.publishedId + typeName);
exports.remoteSnapshots = remoteSnapshots;