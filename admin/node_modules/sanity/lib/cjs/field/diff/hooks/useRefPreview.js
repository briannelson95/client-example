"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useRefPreview = useRefPreview;

var _react = require("react");

var _datastores = require("../../../datastores");

function useRefPreview(value, schemaType) {
  const documentPreviewStore = (0, _datastores.useDocumentPreviewStore)();
  const [preview, setPreview] = (0, _react.useState)(undefined);
  (0, _react.useEffect)(() => {
    let subscription;

    if (value) {
      subscription = documentPreviewStore.observeForPreview(value, schemaType).subscribe(result => setPreview(result.snapshot));
    }

    return () => {
      if (subscription) {
        subscription.unsubscribe();
      }
    };
  }, [documentPreviewStore, value, schemaType]);
  return value ? preview : undefined;
}