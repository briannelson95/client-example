"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useStateLink = useStateLink;

var _react = require("react");

var _useRouter = require("./useRouter");

var _useLink = require("./useLink");

const EMPTY_STATE = {};
/**
 * @public
 */

function useStateLink(props) {
  const {
    onClick,
    replace,
    state,
    target,
    toIndex = false
  } = props;

  if (state && toIndex) {
    throw new Error('Passing both `state` and `toIndex={true}` as props to StateLink is invalid');
  }

  if (!state && !toIndex) {
    // eslint-disable-next-line no-console
    console.error(new Error('No state passed to StateLink. If you want to link to an empty state, its better to use the the `toIndex` property'));
  }

  const {
    resolvePathFromState
  } = (0, _useRouter.useRouter)();
  const href = (0, _react.useMemo)(() => resolvePathFromState(toIndex ? EMPTY_STATE : state || EMPTY_STATE), [resolvePathFromState, state, toIndex]);
  const {
    handleClick
  } = (0, _useLink.useLink)({
    href,
    onClick,
    replace,
    target
  });
  return {
    handleClick,
    href
  };
}