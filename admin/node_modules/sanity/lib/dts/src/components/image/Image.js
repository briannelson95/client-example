import createImageUrlBuilder from '@sanity/image-url';
import React, { forwardRef, useMemo } from 'react';
import { useClient } from '../../hooks';
export const Image = forwardRef(function Image(props, ref) {
    const { dpr, fit, height, source, width, ...restProps } = props;
    const client = useClient();
    const imageUrlBuilder = useMemo(() => createImageUrlBuilder(client), [client]);
    const image = useMemo(() => imageUrlBuilder.image(source), [imageUrlBuilder, source]);
    const url = useMemo(() => {
        let b = image;
        if (dpr)
            b = b.dpr(dpr);
        if (fit)
            b = b.fit(fit);
        if (width)
            b = b.width(width);
        if (height)
            b = b.height(height);
        return b.url();
    }, [dpr, fit, height, image, width]);
    return React.createElement("img", { ...restProps, ref: ref, src: url });
});
//# sourceMappingURL=Image.js.map