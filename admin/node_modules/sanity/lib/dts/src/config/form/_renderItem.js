import { defaultRenderItem } from '../../form/studio/defaults';
function _collectMiddleware(middlewares, plugins) {
    for (const plugin of plugins) {
        // Recursive
        if (plugin.plugins) {
            _collectMiddleware(middlewares, plugin.plugins);
        }
        if (plugin.form?.renderItem) {
            middlewares.push(plugin.form?.renderItem);
        }
    }
}
/**
 * @internal
 */
export function _createRenderItem(config) {
    return (props) => {
        const middlewares = [];
        if (config.plugins) {
            _collectMiddleware(middlewares, config.plugins);
        }
        if (config.form?.renderItem) {
            middlewares.push(config.form?.renderItem);
        }
        // Initialize the callback chain
        let next = defaultRenderItem;
        for (const middleware of middlewares) {
            const defaultRender = next;
            next = (itemProps) => {
                return middleware(itemProps, defaultRender) || defaultRender(itemProps);
            };
        }
        return next(props);
    };
}
//# sourceMappingURL=_renderItem.js.map