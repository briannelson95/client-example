import { defaultRenderField } from '../../form/studio/defaults';
function _collectMiddleware(middlewares, plugins) {
    for (const plugin of plugins) {
        // Recursive
        if (plugin.plugins) {
            _collectMiddleware(middlewares, plugin.plugins);
        }
        if (plugin.form?.renderField) {
            middlewares.push(plugin.form?.renderField);
        }
    }
}
/**
 * @internal
 */
export function _createRenderField(config) {
    return (props) => {
        const middlewares = [];
        if (config.plugins) {
            _collectMiddleware(middlewares, config.plugins);
        }
        if (config.form?.renderField) {
            middlewares.push(config.form?.renderField);
        }
        // Initialize the callback chain
        let next = defaultRenderField;
        for (const middleware of middlewares) {
            const defaultRender = next;
            next = (fieldProps) => {
                return middleware(fieldProps, defaultRender) || defaultRender(fieldProps);
            };
        }
        return next(props);
    };
}
//# sourceMappingURL=_renderField.js.map