/**
 * @internal
 */
export function createPatchChannel() {
    const _subscribers = [];
    return {
        publish(msg) {
            for (const subscriber of _subscribers) {
                subscriber(msg);
            }
        },
        subscribe(subscriber) {
            _subscribers.push(subscriber);
            return () => {
                const idx = _subscribers.indexOf(subscriber);
                if (idx > -1) {
                    _subscribers.splice(idx, 1);
                }
            };
        },
    };
}
//# sourceMappingURL=PatchChannel.js.map