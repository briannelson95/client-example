import { Button, Card, Code, ErrorBoundary, Stack } from '@sanity/ui';
import React, { useCallback, useState } from 'react';
import { SanityDefaultPreview, SanityPreview } from '../../../../../preview';
export const resolvePreviewComponent = () => TestPreview;
function TestPreview(props) {
    const [errorParams, setErrorParams] = useState(null);
    const handleCatch = useCallback((params) => {
        setErrorParams(params);
    }, []);
    const handleRetry = useCallback(() => setErrorParams(null), []);
    if (errorParams) {
        return (React.createElement(Card, { padding: 3, tone: "critical" },
            React.createElement(Code, { language: "json" }, JSON.stringify(errorParams)),
            React.createElement(Stack, { marginTop: 3 },
                React.createElement(Button, { onClick: handleRetry, text: "Retry" }))));
    }
    // NOTE: Hacky way to preview a block image in the Workshop
    if (props.type?.type?.name === 'image') {
        return (React.createElement(SanityDefaultPreview, { ...props, _renderAsBlockImage: true, layout: "block", value: { media: React.createElement("img", { src: "https://source.unsplash.com/960x960/?tree" }), ...props.value } }));
    }
    return (React.createElement(ErrorBoundary, { onCatch: handleCatch },
        React.createElement(SanityPreview, { ...props })));
}
//# sourceMappingURL=resolvePreviewComponent.js.map