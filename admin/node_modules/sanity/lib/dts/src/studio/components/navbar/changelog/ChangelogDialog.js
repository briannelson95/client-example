import { Box, Card, Dialog, MenuDivider, Stack, Text } from '@sanity/ui';
import React from 'react';
import styled from 'styled-components';
import { ChangelogList } from './ChangelogList';
const StickyBox = styled(Box) `
  position: sticky;
  top: 0;
  z-index: 1;
`;
const EMPTY_ARRAY = [];
export function ChangelogDialog(props) {
    const { changelog, currentVersion, dialogProps, latestVersion } = props;
    const changelogWithChangeItems = (changelog || EMPTY_ARRAY).filter((c) => (c?.changeItems || EMPTY_ARRAY)?.length > 0);
    const hasChangelog = changelogWithChangeItems.length > 0;
    return (React.createElement(Dialog, { header: "Upgrade the Sanity Studio", width: 1, ...dialogProps, id: "changelog-dialog" },
        React.createElement(React.Fragment, null,
            React.createElement(StickyBox, null,
                React.createElement(Card, { padding: 4, borderBottom: hasChangelog },
                    React.createElement(Stack, { space: 4 },
                        React.createElement(Stack, { space: 3 },
                            hasChangelog && React.createElement(Text, { weight: "semibold" }, "Changelog"),
                            currentVersion && latestVersion && (React.createElement(Text, { muted: true, size: 1 },
                                "Your Sanity Studio is version ",
                                React.createElement("code", null, currentVersion),
                                ". The latest version is ",
                                React.createElement("code", null, latestVersion),
                                ".")))))),
            hasChangelog && (React.createElement(Stack, { space: 5, paddingY: 4 }, changelogWithChangeItems?.map((log, index) => {
                const { changeItems, version } = log;
                const showDivider = index < changelogWithChangeItems.length - 1;
                const isLatest = version === latestVersion;
                return (React.createElement(React.Fragment, { key: version },
                    React.createElement(Box, { paddingX: 4 },
                        React.createElement(ChangelogList, { changeItems: changeItems || EMPTY_ARRAY, version: version, isLatest: isLatest })),
                    showDivider && React.createElement(MenuDivider, null)));
            }))))));
}
//# sourceMappingURL=ChangelogDialog.js.map