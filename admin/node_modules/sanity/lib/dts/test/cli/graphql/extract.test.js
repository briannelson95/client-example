import { orderBy } from 'lodash';
import { extractFromSanitySchema } from '../../../src/cli/actions/graphql/extractFromSanitySchema';
import testStudioSchema from './fixtures/test-studio';
describe('GraphQL - Schema extraction', () => {
    beforeEach(() => {
        jest.useFakeTimers();
        jest.resetModules();
    });
    afterEach(() => {
        jest.runAllTimers();
    });
    /**
     * @jest-environment jsdom
     */
    it('Should be able to extract schema', () => {
        const extracted = extractFromSanitySchema(testStudioSchema, {
            nonNullDocumentFields: false,
        });
        expect(sortExtracted(extracted)).toMatchSnapshot();
    });
});
function sortExtracted(schema) {
    const interfaces = orderBy(schema.interfaces, (iface) => iface.name).map((iface) => ({
        ...iface,
        fields: orderBy(iface.fields, (field) => field.fieldName),
    }));
    const types = orderBy(schema.types, (type) => type.name).map((type) => ({
        ...type,
        fields: orderBy(type.fields, (field) => field.fieldName),
    }));
    return { interfaces, types };
}
//# sourceMappingURL=extract.test.js.map