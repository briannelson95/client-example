import React from 'react';
import { useDocumentPane } from '../../useDocumentPane';
import { unstable_useDocumentPreview as useDocumentPreview } from '../../../../../preview';
export function DocumentHeaderTitle() {
  const {
    connectionState,
    schemaType,
    title,
    value: documentValue
  } = useDocumentPane();
  const subscribed = Boolean(documentValue) && connectionState === 'connected';
  const {
    error,
    value
  } = useDocumentPreview({
    enabled: subscribed,
    schemaType,
    value: documentValue
  });

  if (connectionState !== 'connected') {
    return /*#__PURE__*/React.createElement(React.Fragment, null);
  }

  if (!documentValue) {
    return /*#__PURE__*/React.createElement(React.Fragment, null, "New ", (schemaType === null || schemaType === void 0 ? void 0 : schemaType.title) || (schemaType === null || schemaType === void 0 ? void 0 : schemaType.name));
  }

  if (subscribed) {
    if (error) {
      return /*#__PURE__*/React.createElement(React.Fragment, null, "Error: ", error.message);
    }

    return /*#__PURE__*/React.createElement(React.Fragment, null, (value === null || value === void 0 ? void 0 : value.title) || /*#__PURE__*/React.createElement("span", {
      style: {
        color: 'var(--card-muted-fg-color)'
      }
    }, "Untitled"));
  }

  return /*#__PURE__*/React.createElement(React.Fragment, null, title);
}