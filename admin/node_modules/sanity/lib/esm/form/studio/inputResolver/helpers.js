import _get from "lodash/get";
export function getOption(type, optionName) {
  return _get(type.options, optionName);
}
const PSEUDO_OBJECTS = ['array', 'file', 'image', 'reference'];
const HIDDEN_FIELDS = ['asset', 'crop', 'hotspot', '_ref', '_weak'];
const NO_LEVEL_LAYOUTS = ['tags'];
export function getObjectFieldLevel(field) {
  var _options$list;

  const {
    type,
    fields,
    options
  } = field.schemaType;
  const fieldType = (type === null || type === void 0 ? void 0 : type.name) || '';
  const isPseudoObject = PSEUDO_OBJECTS.includes(fieldType);
  const hasVisibleFields = (fields === null || fields === void 0 ? void 0 : fields.filter(f => !HIDDEN_FIELDS.includes(f.name)).length) > 0;
  const hasListOptions = (options === null || options === void 0 ? void 0 : (_options$list = options.list) === null || _options$list === void 0 ? void 0 : _options$list.length) > 0;

  if (hasVisibleFields || hasListOptions || !isPseudoObject) {
    return field.level;
  }

  return 0;
}
export function getArrayFieldLevel(field) {
  var _ref;

  const {
    options
  } = field.schemaType;
  const hasListOptions = ((_ref = (options === null || options === void 0 ? void 0 : options.list) || []) === null || _ref === void 0 ? void 0 : _ref.length) > 0;
  const isNoLevelLayout = NO_LEVEL_LAYOUTS.includes((options === null || options === void 0 ? void 0 : options.layout) || '');

  if (hasListOptions && !isNoLevelLayout) {
    return field.level;
  }

  return 0;
}