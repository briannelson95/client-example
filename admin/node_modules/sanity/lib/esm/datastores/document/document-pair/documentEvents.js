import { merge } from 'rxjs';
import { switchMap } from 'rxjs/operators';
import { memoizedPair } from './memoizedPair'; // A stream of all events related to either published or draft, each event comes with a 'target'
// that specifies which version (draft|published) the event is about

export function documentEvents(client, idPair, typeName) {
  return memoizedPair(client, idPair).pipe(switchMap(_ref => {
    let {
      draft,
      published
    } = _ref;
    return merge(draft.events, published.events);
  }));
}