import { Observable } from 'rxjs';
export function doBeforeUnload(cleanup) {
  return input$ => new Observable(subscriber => {
    const onBeforeUnload = event => {
      cleanup();
      delete event.returnValue;
    };

    window.addEventListener('beforeunload', onBeforeUnload);
    const subscription = input$.subscribe(subscriber);
    return () => {
      subscription.unsubscribe();
      window.removeEventListener('beforeunload', onBeforeUnload);
    };
  });
}