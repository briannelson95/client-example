"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.loadSanityMonorepo = loadSanityMonorepo;

var _path = _interopRequireDefault(require("path"));

var _readPkgUp = _interopRequireDefault(require("read-pkg-up"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Load information about the `sanity-io/sanity` monorepo (if applicable)
 *
 * @internal
 */
async function loadSanityMonorepo(cwd) {
  let p = cwd;

  while (p !== '/') {
    const readResult = await (0, _readPkgUp.default)({
      cwd: p
    });

    if (!readResult) {
      return undefined;
    }

    if (readResult.packageJson.isSanityMonorepo) {
      return {
        path: _path.default.dirname(readResult.path)
      };
    }

    p = _path.default.dirname(_path.default.dirname(readResult.path));
  }

  return undefined;
}