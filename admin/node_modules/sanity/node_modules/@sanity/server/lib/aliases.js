"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getAliases = getAliases;

var _path = _interopRequireDefault(require("path"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Returns an object of aliases for vite to use
 *
 * @internal
 */
function getAliases(opts) {
  const {
    monorepo
  } = opts;

  if (!(monorepo !== null && monorepo !== void 0 && monorepo.path)) {
    return {};
  } // Load monorepo aliases (if the current Studio is located within the sanity monorepo)
  // This is done in order for the Vite server to use the source files instead of
  // the compiled output, allowing for a better dev experience.


  const aliasesPath = _path.default.join(monorepo.path, 'dev', 'aliases'); // eslint-disable-next-line import/no-dynamic-require


  const devAliases = require(aliasesPath);

  const monorepoAliases = Object.fromEntries(Object.entries(devAliases).map(_ref => {
    let [key, modulePath] = _ref;
    return [key, _path.default.resolve(monorepo.path, modulePath)];
  }));
  return monorepoAliases;
}