"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resolveLatestVersions = resolveLatestVersions;

var _getLatestVersion = _interopRequireDefault(require("get-latest-version"));

var _promisePropsRecursive = _interopRequireDefault(require("promise-props-recursive"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Resolve the latest versions of given packages within their defined ranges
 *
 * @param pkgs - `{packageName: rangeOrTag}`
 * @returns Object of resolved version numbers
 */
function resolveLatestVersions(pkgs) {
  const lookups = {};

  for (const [packageName, range] of Object.entries(pkgs)) {
    lookups[packageName] = range === 'latest' ? (0, _getLatestVersion.default)(packageName, {
      range
    }).then(caretify) : range;
  }

  return (0, _promisePropsRecursive.default)(lookups);
}

function caretify(version) {
  return "^".concat(version);
}