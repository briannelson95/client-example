"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.readdirRecursive = readdirRecursive;

var _path = _interopRequireDefault(require("path"));

var _promises = _interopRequireDefault(require("fs/promises"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

async function readdirRecursive(dir) {
  let content = [];

  const currentPath = _path.default.resolve(dir);

  const dirContent = (await _promises.default.readdir(currentPath)).map(item => _path.default.join(currentPath, item));

  for (const subPath of dirContent) {
    const stat = await _promises.default.stat(subPath);
    const isDir = stat.isDirectory();
    content.push({
      path: subPath,
      isDir
    });

    if (isDir) {
      content = content.concat(await readdirRecursive(subPath));
    }
  }

  return content;
}